# Test suite for stdlib/math.goth
#
# Note: math.goth has a parse error due to `pi` being a reserved keyword.
# Until that is fixed, we test math functions by defining them inline here.

# === Basic ops ===
â•­â”€ absI : â„¤ â†’ â„¤
â•°â”€ if â‚€ < 0 then 0 - â‚€ else â‚€

â•­â”€ absF : F â†’ F
â•°â”€ if â‚€ < 0.0 then 0.0 - â‚€ else â‚€

â•­â”€ signI : â„¤ â†’ â„¤
â•°â”€ if â‚€ < 0 then 0 - 1 else if â‚€ > 0 then 1 else 0

â•­â”€ signF : F â†’ F
â•°â”€ if â‚€ < 0.0 then 0.0 - 1.0 else if â‚€ > 0.0 then 1.0 else 0.0

# === Powers/roots ===
â•­â”€ sq : F â†’ F
â•°â”€ â‚€ Ã— â‚€

â•­â”€ cb : F â†’ F
â•°â”€ â‚€ Ã— â‚€ Ã— â‚€

â•­â”€ mySqrt : F â†’ F
â•°â”€ âˆšâ‚€

â•­â”€ hypot : F â†’ F â†’ F
â•°â”€ âˆš(â‚ Ã— â‚ + â‚€ Ã— â‚€)

# === Number theory ===
â•­â”€ isEven : â„¤ â†’ Bool
â•°â”€ â‚€ % 2 = 0

â•­â”€ isOdd : â„¤ â†’ Bool
â•°â”€ â‚€ % 2 â‰  0

â•­â”€ divides : â„¤ â†’ â„¤ â†’ Bool
â•°â”€ â‚€ % â‚ = 0

â•­â”€ floorDiv : â„¤ â†’ â„¤ â†’ â„¤
â•°â”€ â‚ / â‚€

â•­â”€ myMod : â„¤ â†’ â„¤ â†’ â„¤
â•°â”€ let r â† â‚ % â‚€
   in if r < 0 then r + â‚€ else r

# === Rounding ===
â•­â”€ myFloor : F â†’ F
â•°â”€ âŒŠâ‚€âŒ‹

â•­â”€ myCeil : F â†’ F
â•°â”€ âŒˆâ‚€âŒ‰

# === Comparison ===
â•­â”€ minF : F â†’ F â†’ F
â•°â”€ if â‚ < â‚€ then â‚ else â‚€

â•­â”€ maxF : F â†’ F â†’ F
â•°â”€ if â‚ > â‚€ then â‚ else â‚€

â•­â”€ clamp : F â†’ F â†’ F â†’ F
â•°â”€ if â‚€ < â‚‚ then â‚‚ else if â‚€ > â‚ then â‚ else â‚€

# === Interpolation ===
â•­â”€ lerp : F â†’ F â†’ F â†’ F
â•°â”€ â‚ + â‚‚ Ã— (â‚€ - â‚)

â•­â”€ main : () â†’ ()
â•°â”€ # Constants (using built-in Ï€ and ğ•–)
   let _ â† print (toString (âŒŠÏ€ Ã— 100.0 + 0.5âŒ‹)) in
   let _ â† print (toString (âŒŠğ•– Ã— 100.0 + 0.5âŒ‹)) in
   let _ â† print (toString (âŒŠ((1.0 + âˆš5.0) / 2.0) Ã— 1000.0 + 0.5âŒ‹)) in
   let _ â† print (toString (âŒŠâˆš2.0 Ã— 1000.0 + 0.5âŒ‹)) in

   # Basic ops
   let _ â† print (toString (absI (0 - 7))) in
   let _ â† print (toString (absI 3)) in
   let _ â† print (toString (absF (0.0 - 2.5))) in
   let _ â† print (toString (signI (0 - 4))) in
   let _ â† print (toString (signI 0)) in
   let _ â† print (toString (signI 6)) in
   let _ â† print (toString (signF (0.0 - 1.5))) in
   let _ â† print (toString (signF 0.0)) in
   let _ â† print (toString (signF 3.0)) in

   # Powers/roots
   let _ â† print (toString (sq 5.0)) in
   let _ â† print (toString (cb 3.0)) in
   let _ â† print (toString (mySqrt 16.0)) in
   let _ â† print (toString (hypot 3.0 4.0)) in

   # Exponential/log (using built-ins)
   let _ â† print (toString (âŒŠexp 1.0 Ã— 100.0 + 0.5âŒ‹)) in
   let _ â† print (toString (âŒŠln ğ•– Ã— 100.0 + 0.5âŒ‹)) in
   let _ â† print (toString (âŒŠlogâ‚â‚€ 100.0 Ã— 100.0 + 0.5âŒ‹)) in
   let _ â† print (toString (âŒŠlogâ‚‚ 8.0 Ã— 100.0 + 0.5âŒ‹)) in

   # Number theory
   let _ â† print (toString (isEven 6)) in
   let _ â† print (toString (isOdd 7)) in
   let _ â† print (toString (divides 5 10)) in
   let _ â† print (toString (divides 3 10)) in
   let _ â† print (toString (floorDiv 3 10)) in
   let _ â† print (toString (floorDiv 10 3)) in
   let _ â† print (toString (myMod 3 10)) in
   let _ â† print (toString (myMod 10 3)) in

   # Rounding
   let _ â† print (toString (myFloor 3.7)) in
   let _ â† print (toString (myCeil 3.2)) in

   # Comparison
   let _ â† print (toString (minF 3.0 7.0)) in
   let _ â† print (toString (maxF 3.0 7.0)) in
   let _ â† print (toString (clamp 2.0 8.0 5.0)) in
   let _ â† print (toString (clamp 2.0 8.0 1.0)) in
   let _ â† print (toString (clamp 2.0 8.0 10.0)) in

   # Interpolation
   let _ â† print (toString (lerp 0.5 0.0 10.0)) in

   âŸ¨âŸ©
