# Devstral2 Benchmark Diagnostic Report

This document analyzes the Goth code generated by Devstral2 (newer model) to identify documentation gaps.

## Test Results Summary

| File | Status | Error/Notes |
|------|--------|-------------|
| identity | PASS | Output: 5 |
| add_one | PASS | Output: 6 |
| double | PASS | Output: 10 |
| square | PASS | Output: 25 |
| factorial | PASS | Output: 120 |
| fibonacci | PASS | Output: 5 |
| compose | PASS | Output: <partial/2> (needs args) |
| gamma_fact | PASS | Output: 120 |
| is_even | FAIL (parse) | `==` instead of `=` |
| gcd | FAIL (parse) | `==` instead of `=` |
| ackermann | FAIL (parse) | `==` instead of `=` |
| harmonic | FAIL (parse) | `==` instead of `=`, `float()` syntax |
| modpow | FAIL (parse) | `==` instead of `=` |
| is_prime | FAIL (parse) | `==`, undefined `exists`, `isqrt`, `range` |
| nth_prime | FAIL (parse) | `==`, undefined `filter`, `is_prime`, `infinity` |
| map | FAIL (parse) | `[I64]` type syntax, `head`/`tail` |
| fold | FAIL (parse) | Type variables `A`, `B` in signature |
| binary_search | FAIL (parse) | `[I64]` type, `list[₁]` indexing syntax |

## Summary Statistics

- **Total files**: 17
- **Passing**: 8 (47%)
- **Failing**: 9 (53%)

## Comparison with Devstral1

| Metric | Devstral1 | Devstral2 |
|--------|-----------|-----------|
| Total files | 8 | 17 |
| Pass rate | 0% | 47% |
| Would pass with fixes | 25% | ~80% |

**Devstral2 is significantly better than Devstral1.**

## Key Issues Identified

### 1. Equality Operator: `==` vs `=` (7 files)

**Devstral2 wrote**:
```goth
if ₀ == 0 then ...
```

**Goth uses single equals**:
```goth
if ₀ = 0 then ...
```

This is a major documentation gap - the equality operator should be explicitly stated.

### 2. List Type Syntax (2 files)

**Devstral2 wrote**:
```goth
╭─ main : (I64 → I64) → [I64] → [I64]
```

**May need different syntax** - unclear from docs what list type syntax is.

### 3. Type Variables in Signatures (1 file)

**Devstral2 wrote**:
```goth
╭─ main : (A → B → B) → B → [A] → B
```

Type variables may need different syntax or may not be supported in this context.

### 4. Function Call Syntax: `float()` vs `float` (1 file)

**Devstral2 wrote**:
```goth
1.0 / float(₀) + main (₀ - 1)
```

**Should be**:
```goth
1.0 / (float ₀) + main (₀ - 1)
```

### 5. Undefined Builtins (3 files)

Devstral2 assumed existence of:
- `exists` - boolean quantifier
- `isqrt` - integer square root  
- `range` - range generator
- `filter` - list filter
- `head` / `tail` - list operations
- `infinity` - infinite value

These may or may not exist in Goth.

### 6. Array Indexing Syntax (1 file)

**Devstral2 wrote**:
```goth
list[₁]
```

This bracket indexing syntax doesn't exist in Goth.

## What Devstral2 Got Right

1. **Curried function types**: `I64 → I64 → I64` (not tuples)
2. **Main function**: All functions named `main`
3. **De Bruijn indices**: Correct usage of `₀`, `₁`, `₂`
4. **Modulo operator**: Used `%` correctly
5. **Recursive calls**: `main (₀ - 1)` with proper spacing
6. **Conditionals**: `if ... then ... else` structure correct
7. **Unicode operators**: `×`, `→` used correctly

## Files That Would Pass With `==` → `=` Fix

If we change `==` to `=`, these additional files would likely work:
- is_even
- gcd  
- ackermann
- modpow (needs logic fix too)

## Conclusion

Devstral2 shows significant improvement over Devstral1:
- Understood curried types correctly
- Used De Bruijn indices properly
- Named functions `main` as required
- Used `%` for modulo

The main gap is the equality operator (`=` vs `==`), which should be explicitly documented.
The 47% pass rate (vs 0% for Devstral1) demonstrates meaningful learning from the documentation.
